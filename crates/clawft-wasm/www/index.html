<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>clawft-wasm Browser Test Harness</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: "SF Mono", "Fira Code", "Cascadia Code", Consolas, monospace;
      background: #0d1117;
      color: #c9d1d9;
      display: flex;
      flex-direction: column;
      height: 100vh;
      padding: 1rem;
      gap: 0.75rem;
    }

    h1 {
      font-size: 1.1rem;
      color: #58a6ff;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    #status-indicator {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #484f58;
    }
    #status-indicator.ready    { background: #3fb950; }
    #status-indicator.loading  { background: #d29922; }
    #status-indicator.error    { background: #f85149; }

    #status-text {
      font-size: 0.8rem;
      color: #8b949e;
    }

    /* Config panel */
    #config-panel {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    #config-panel label { font-size: 0.85rem; color: #8b949e; }
    #config-textarea {
      font-family: inherit;
      font-size: 0.8rem;
      background: #161b22;
      color: #c9d1d9;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 0.5rem;
      resize: vertical;
      min-height: 120px;
      max-height: 200px;
    }
    #config-textarea:focus { outline: none; border-color: #58a6ff; }

    #init-btn {
      align-self: flex-start;
      background: #238636;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 0.4rem 1rem;
      font-family: inherit;
      font-size: 0.85rem;
      cursor: pointer;
    }
    #init-btn:hover { background: #2ea043; }
    #init-btn:disabled { background: #484f58; cursor: not-allowed; }

    /* Chat area */
    #chat-display {
      flex: 1;
      overflow-y: auto;
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 0.75rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .msg {
      padding: 0.4rem 0.6rem;
      border-radius: 4px;
      font-size: 0.8rem;
      line-height: 1.4;
      max-width: 85%;
      word-wrap: break-word;
    }
    .msg .ts {
      font-size: 0.65rem;
      color: #484f58;
      margin-bottom: 0.15rem;
    }
    .msg.user {
      align-self: flex-end;
      background: #1f3a5f;
      border: 1px solid #264a78;
    }
    .msg.assistant {
      align-self: flex-start;
      background: #1a2332;
      border: 1px solid #30363d;
    }
    .msg.error {
      align-self: center;
      background: #3d1418;
      border: 1px solid #f8514966;
      color: #f85149;
    }
    .msg.system {
      align-self: center;
      background: #0d1117;
      border: 1px solid #30363d;
      color: #8b949e;
      font-style: italic;
    }

    /* Input bar */
    #input-bar {
      display: flex;
      gap: 0.5rem;
    }
    #msg-input {
      flex: 1;
      font-family: inherit;
      font-size: 0.85rem;
      background: #161b22;
      color: #c9d1d9;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 0.5rem;
    }
    #msg-input:focus { outline: none; border-color: #58a6ff; }
    #msg-input:disabled { background: #0d1117; color: #484f58; }

    #send-btn {
      background: #1f6feb;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 0.4rem 1.2rem;
      font-family: inherit;
      font-size: 0.85rem;
      cursor: pointer;
    }
    #send-btn:hover { background: #388bfd; }
    #send-btn:disabled { background: #484f58; cursor: not-allowed; }
  </style>
</head>
<body>
  <header>
    <h1>
      clawft-wasm
      <span id="status-indicator"></span>
      <span id="status-text">not initialized</span>
    </h1>
  </header>

  <section id="config-panel">
    <label for="config-textarea">Provider Configuration (JSON)</label>
    <textarea id="config-textarea">{
  "providers": {
    "anthropic": {
      "apiKey": "YOUR_API_KEY_HERE",
      "browserDirect": true
    }
  },
  "agents": {
    "defaults": {
      "model": "anthropic/claude-sonnet-4-20250514",
      "maxTokens": 4096
    }
  }
}</textarea>
    <button id="init-btn">Initialize</button>
  </section>

  <section id="chat-display"></section>

  <section id="input-bar">
    <input id="msg-input" type="text" placeholder="Type a message..." disabled />
    <button id="send-btn" disabled>Send</button>
  </section>

  <script type="module" src="./main.js"></script>
</body>
</html>
